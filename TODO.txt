# TODO

## Completion of feature set

- Provide HTML validation for inline markup.  Return the
  string with stray markers in HTML-escaped form.  This
  will display the field in the form it will appear in
  the document.

- Provide a "divide" method that splits a string into 
  "mutable" and "preserve" forks, with index hints to
  be used in recombine the two forks using a "conquer"
  method.

- Provide discrete handling for "function" and "tag" types
  of decoration.  The latter work as at present, with
  simple nested application.  The former will require
  the divide and conquer mechanism described above,
  and will apply only to the "mutable" fork of the
  string.

- For inline markup, do not recognize purely presentational
  elements at top level; require semantic markup tags around
  everything that is to be specially formatted.  Stray
  presentational tags to be rendered as tag literals.

- Erratum: unparsed dates.  The input object for dates
  should include a "literal" attribute, which renders
  instead of the formatted date if the "year" attribute
  is passed as nil.

- Erratum: raw date variables.  These should render as
  2000-12-01 when they appear as the argument to a text
  element.  Important for sort keys, as the raw variable
  is used all over the place in existing styles.
    (awaits test submission.  fbennett 2009-05-18)

- Erratum: suppression of elements.  Doesn't seem to be
  any mechanism in place for restraining variables from
  rendering more than once in a citation.
    (awaits test submission.  fbennett 2009-05-18)

- Erratum: all spanned top-level elements within
  a substitute span need to be treated as well-behaved
  conditionals, setting the substitute rendering flag to
  false if they render something, and skipping unless
  that value is true.  This will require (a) that the
  code to cast these elements with appropriate conditional
  wrappers be refactored as a discrete function, and
  (b) that the output queue itself set a return value somewhere
  to indicate whether or not something rendered.
    (pending.  fbennett 2009-05-18)

- Tidy up and finish out API, provide examples and
  an overview readme doc.
    (pending. fbennett 2009-05-21)

- Various options and special formatting attributes need to be
  implemented, none of which seem particularly scarey.
    (a very short list of these remain.  fbennett 2009-04-11)


## Possible proposals for CSL

- Localized date formatting?
    (pending.  fbennett 2009-04-11)
